\"\Змеи\""\: формулы вычисления рейтингов.

Что ж, [URL=http://forum.sources.ru/index.php?showtopic=364496]главная тема[/URL] набрала уже заметное количество просмотров, но фатальных недостатков никто не нашел. Поэтому ставлю первую задачу: разработка формул вычисления рейтингов игроков. В Вики есть [URL=\wiki\:tasks:rating]описание задачи[/URL], но продублирую здесь. Итак, формулы должны удовлетворять следующим требованиям:

* Рейтинг является целым числом. Возможно, со знаком.
* Рейтинг не может устремляться в бесконечность (или минус бесконечность).
* Рейтинг меняется только по результатам боя.
* Если змея съела всех соперников, ее рейтинг не может уменьшиться. Если змея съедена, ее рейтинг не может увеличиться.
* Изменение рейтинга по итогам боя зависит от рейтингов соперников. Награда за победу над сильным соперником выше, штраф за проигрыш сильному сопернику ниже. При слишком большой разнице рейтинг победителя может даже уменьшиться, а рейтинг проигравшего увеличиться (примечание: бой не обязательно заканчивается съедением всех соперников; победитель - самая длинная змея, проигравший - самая короткая).
* Изменение рейтинга по итогам боя зависит от итоговых длин змей: чем больше длина змеи и чем меньше длины змей соперников, тем выше рейтинг.
* Нельзя прокачать рейтинг выше, чем у чемпионов, не вызывая этих чемпионов на бой. Как вариант: итоговый рейтинг не может превышать исходный рейтинг побежденных соперников больше, чем на фиксированную величину.
* Особое внимание нужно уделить начальному рейтингу игрока. Просто назначать новичкам минимально возможный рейтинг не годится: новый игрок, выставивший змею с сильной программой, может серьезно испортить рейтинги чемпионов.
* Нужно избегать резких скачков рейтинга. Как вариант, учитывать не только исходный рейтинг, но и количество боев: чем меньше обычных боев провела змея, тем слабее она влияет на рейтинг других змей.

Задача: разработать формулы, удовлетворяющие этим требованиям, и протестировать их. Требования обсуждаются, если видите непонятности и противоречия в требованиях - пишите, предлагайте свое решение.